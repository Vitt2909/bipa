<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BIPA — PDV</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body data-page="pdv" data-theme="workspace">
    <header class="app-topbar">
      <div class="app-topbar__brand">
        <span class="brand-mark" aria-hidden="true">B</span>
        <div class="app-topbar__context">
          <span class="app-topbar__name">BIPA</span>
          <span class="app-topbar__store">Loja Demo — Frente de Caixa</span>
        </div>
      </div>
      <nav class="app-topbar__actions" aria-label="Ações rápidas">
        <a class="btn btn--surface" href="/app/admin/dashboard/">Ir para Gestão</a>
        <a class="btn btn--ghost" href="/">Sair</a>
      </nav>
    </header>

    <main class="pdv-shell" data-panel="catalog">
      <div class="pdv-shell__viewport">
        <section class="pdv-panel pdv-panel--catalog" aria-labelledby="pdv-search-title">
          <header class="pdv-panel__header">
            <h2 class="pdv-panel__title" id="pdv-search-title">Buscar produto</h2>
            <p class="pdv-panel__subtitle">Pesquise por nome ou código. Dados fictícios.</p>
          </header>
          <label class="form-field pdv-search">
            <span class="sr-only">Buscar produto</span>
            <input id="pdv-search" type="search" placeholder="Digite para encontrar" autocomplete="off" />
          </label>

          <div class="pdv-scanner">
            <button class="btn btn--surface" id="pdv-open-scanner" type="button">Escanear código</button>
            <p class="pdv-scanner__hint">Use a câmera do dispositivo ou digite manualmente o código da peça.</p>
          </div>

          <ul class="pdv-product-list" id="pdv-product-list" aria-label="Produtos disponíveis"></ul>
        </section>

        <section class="pdv-panel pdv-panel--checkout" aria-labelledby="pdv-checkout-title">
          <header class="pdv-panel__header pdv-panel__header--checkout">
            <button class="pdv-panel__back" id="pdv-checkout-back" type="button" aria-label="Voltar para o catálogo">
              ← Voltar ao catálogo
            </button>
            <div>
              <h2 class="pdv-panel__title" id="pdv-checkout-title">Checkout</h2>
              <p class="pdv-panel__subtitle">Revise itens, descontos e pagamentos.</p>
            </div>
          </header>

          <div class="checkout-flow">
            <section class="checkout-section checkout-section--customer" aria-labelledby="pdv-customer-title">
              <header class="checkout-section__header">
                <h3 class="checkout-section__title" id="pdv-customer-title">Cliente</h3>
              </header>
              <div class="customer-zone" aria-live="polite">
                <div class="customer-zone__header">
                  <p class="customer-zone__label" id="pdv-client-current">
                    Cliente: <strong>Avulso (Padrão)</strong>
                  </p>
                  <button class="customer-zone__change" id="pdv-client-clear" type="button" hidden>
                    Alterar
                  </button>
                </div>
                <label class="form-field customer-zone__search">
                  <span class="form-label">Buscar Cliente (Nome ou WhatsApp)</span>
                  <input
                    id="pdv-client"
                    type="search"
                    placeholder="Buscar Cliente (Nome ou WhatsApp)"
                    autocomplete="off"
                    aria-controls="pdv-client-results"
                    aria-haspopup="listbox"
                    aria-expanded="false"
                  />
                </label>
                <div class="customer-suggestions" id="pdv-client-results" hidden role="listbox"></div>
                <button class="btn btn--surface customer-zone__register" id="pdv-client-register" type="button">
                  + Cadastrar Cliente
                </button>
              </div>
            </section>

            <section class="checkout-section checkout-section--items" aria-labelledby="pdv-cart-title">
              <header class="checkout-section__header">
                <h3 class="checkout-section__title" id="pdv-cart-title">Itens no carrinho</h3>
              </header>
              <ul class="checkout-cart" id="pdv-cart" aria-live="polite"></ul>
            </section>

            <section class="checkout-section checkout-section--summary" aria-labelledby="pdv-summary-title">
              <header class="checkout-section__header">
                <h3 class="checkout-section__title" id="pdv-summary-title">Resumo da venda</h3>
              </header>
              <div class="checkout-summary">
                <dl class="checkout-summary__totals">
                  <div>
                    <dt>Subtotal</dt>
                    <dd id="pdv-subtotal">R$ 0,00</dd>
                  </div>
                  <div>
                    <dt>Desconto</dt>
                    <dd id="pdv-total-discount">R$ 0,00</dd>
                  </div>
                  <div class="checkout-summary__total">
                    <dt>Total</dt>
                    <dd id="pdv-total">R$ 0,00</dd>
                  </div>
                </dl>
                <div class="checkout-summary__discount">
                  <button
                    class="checkout-summary__discount-toggle"
                    id="pdv-discount-toggle"
                    type="button"
                    aria-expanded="false"
                  >
                    Adicionar desconto
                  </button>
                  <div class="checkout-summary__discount-panel" id="pdv-discount-panel" hidden>
                    <label class="form-field discount-controls__field">
                      <span class="form-label">Valor do desconto</span>
                      <div class="discount-input">
                        <span class="discount-input__unit" id="pdv-discount-unit">R$</span>
                        <input
                          id="pdv-discount"
                          type="number"
                          min="0"
                          step="0.01"
                          value="0"
                          inputmode="decimal"
                        />
                      </div>
                    </label>
                    <div class="discount-controls__toggle" role="group" aria-label="Tipo de desconto">
                      <button class="discount-toggle is-active" data-discount-type="currency" type="button">R$</button>
                      <button class="discount-toggle" data-discount-type="percent" type="button">%</button>
                    </div>
                    <div class="checkout-summary__discount-actions">
                      <button class="btn btn--ghost btn--small" id="pdv-discount-clear" type="button">Remover desconto</button>
                      <button class="btn btn--surface btn--small" id="pdv-discount-close" type="button">Concluir</button>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <section class="checkout-section checkout-section--payment" aria-labelledby="pdv-payment-title">
              <header class="checkout-section__header">
                <h3 class="checkout-section__title" id="pdv-payment-title">Pagamento</h3>
              </header>
              <div class="pdv-payment" id="pdv-payment">
                <div class="pdv-payment__methods" role="group" aria-label="Formas de pagamento">
                  <button class="payment-button is-active" data-payment="PIX" type="button">PIX</button>
                  <button class="payment-button" data-payment="Dinheiro" type="button">Dinheiro</button>
                  <button class="payment-button" data-payment="Cartão" type="button">Cartão</button>
                  <button class="payment-button" data-payment="Fiado" type="button">Fiado</button>
                </div>

                <div class="pdv-payment__context" id="pdv-payment-context" aria-live="polite">
                  <p>Use a chave PIX <strong>pix@bipa.demo</strong> para receber o pagamento.</p>
                </div>

                <section class="pix-box" id="pdv-pix-box" hidden aria-live="polite">
                  <header class="pix-box__header">
                    <h3>Pagamento PIX DEMO</h3>
                    <p>Compartilhe o QR Code ou copie o código estático gerado com o valor da venda.</p>
                  </header>
                  <div class="pix-box__content">
                    <div class="pix-box__qr" id="pdv-pix-qr" aria-label="QR Code PIX"></div>
                    <div class="pix-box__details">
                      <div class="pix-box__code" role="group" aria-label="Código PIX copia e cola">
                        <code id="pdv-pix-code">—</code>
                        <button class="btn btn--ghost btn--small" id="pdv-pix-copy" type="button">Copiar código</button>
                      </div>
                      <p class="pix-box__status" id="pdv-pix-status">Aguardando produtos no carrinho.</p>
                    </div>
                  </div>
                </section>

                <button class="btn btn--primary btn--xl" id="pdv-finish" type="button" disabled>
                  Finalizar venda
                </button>
              </div>
            </section>
          </div>
        </section>
      </div>

      <button class="pdv-cart-toggle" id="pdv-cart-toggle" type="button" hidden>
        <span class="pdv-cart-toggle__label" id="pdv-cart-toggle-label">Ver carrinho</span>
        <span class="pdv-cart-toggle__meta" id="pdv-cart-toggle-meta">0 itens • R$ 0,00</span>
      </button>
    </main>

    <section class="pdv-success" id="pdv-success" hidden aria-live="polite">
      <div class="pdv-success__card">
        <button class="pdv-success__close" id="pdv-success-close" type="button" aria-label="Fechar">×</button>
        <span class="pdv-success__icon" aria-hidden="true">✔</span>
        <h2>Venda realizada com sucesso!</h2>
        <p id="pdv-success-total">Total da venda: R$ 0,00</p>
        <div class="pdv-success__actions">
          <button class="btn btn--primary" id="pdv-success-new-sale" type="button">Iniciar nova venda</button>
          <a class="btn btn--surface" href="/app/pdv/recibo/0001/" target="_blank" rel="noreferrer">Imprimir recibo</a>
          <button class="btn btn--ghost" id="pdv-success-whatsapp" type="button">Enviar recibo por WhatsApp</button>
        </div>
      </div>
    </section>

    <div class="pdv-modal" id="pdv-register-modal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="pdv-modal__content">
        <header class="pdv-modal__header">
          <h2>Novo cliente rápido</h2>
          <button class="pdv-modal__close" id="pdv-register-close" type="button" aria-label="Fechar">×</button>
        </header>
        <form class="pdv-modal__body pdv-register__form step-form" id="pdv-register-form" data-step-form>
          <ol class="step-indicator" data-step-progress role="list">
            <li data-step-progress-item>Identificação</li>
            <li data-step-progress-item>Contato</li>
          </ol>

          <div class="step-form__step" data-step-index="0" data-step-label="Identificação">
            <label class="form-field">
              <span class="form-label">Nome completo</span>
              <input id="pdv-register-name" type="text" required autocomplete="off" data-autofocus />
              <span class="form-field__feedback" id="pdv-register-name-feedback" hidden></span>
            </label>
          </div>

          <div class="step-form__step" data-step-index="1" data-step-label="Contato" hidden aria-hidden="true">
            <label class="form-field">
              <span class="form-label">WhatsApp</span>
              <input
                id="pdv-register-whatsapp"
                type="tel"
                required
                inputmode="tel"
                autocomplete="off"
                placeholder="(99) 99999-9999"
              />
              <span class="form-field__feedback" id="pdv-register-whatsapp-feedback" hidden></span>
            </label>
          </div>

          <div class="step-form__controls pdv-register__actions">
            <button class="btn btn--surface" id="pdv-register-cancel" type="button">Cancelar</button>
            <div class="step-form__nav">
              <button class="btn btn--ghost" type="button" data-step-prev hidden>Voltar</button>
              <button class="btn btn--primary" type="button" data-step-next>Continuar</button>
              <button class="btn btn--primary" type="submit" data-step-submit hidden>Salvar e usar na venda</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <div class="pdv-modal" id="pdv-scanner-modal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="pdv-modal__content pdv-scanner__content">
        <header class="pdv-modal__header">
          <div class="pdv-scanner__header">
            <h2>Escanear produto</h2>
            <span class="pdv-scanner__badge" id="pdv-scanner-support">Leitor nativo</span>
          </div>
          <button class="pdv-modal__close" id="pdv-scanner-close" type="button" aria-label="Fechar">×</button>
        </header>
        <div class="pdv-scanner__body">
          <div class="pdv-scanner__viewer">
            <video id="pdv-scanner-video" class="pdv-scanner__video" playsinline muted></video>
          </div>
          <p class="pdv-scanner__status" id="pdv-scanner-status">Inicializando leitor...</p>
          <form class="pdv-scanner__manual" id="pdv-scanner-manual">
            <label class="form-field">
              <span class="form-label">Código do produto</span>
              <input id="pdv-scanner-input" type="text" autocomplete="off" placeholder="Ex.: BR-0001" />
            </label>
            <div class="pdv-scanner__actions">
              <button class="btn btn--primary" type="submit">Adicionar ao carrinho</button>
              <button class="btn btn--ghost" type="button" id="pdv-scanner-cancel">Cancelar</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script src="/script.js" defer></script>
  </body>
</html>
